<!DOCTYPE html>
<title>Angband Releases: 3.1.0beta - angband.github.io</title>
<meta charset="utf-8">

<link href='https://fonts.googleapis.com/css?family=Libre+Baskerville:700,400|Open+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/style.css" type="text/css">
<link rel="shortcut icon" href="/img/favicon.png" type="image/png">
<meta name="viewport" content="width=device-width">

<body >

<header>
	<div class="container">
		<h1><a href="/"><img src='/img/header.png' alt="Angband"></a></h1>
		<nav>
			<a href="/develop" >About</a>
			<a href="/release" class='selected'>Releases</a>
			<a href="https://angband.readthedocs.io/">Docs</a>
			<a href="http://angband.oook.cz/forum/">Forum</a>
		</nav>
	</div>
</header>

<div id="content">
	<div class="container">
		<h2>Angband Releases: 3.1.0beta</h2>

<div id="releasesnav" class="highlight_box">
<h3>Other releases:</h3>
<ul><li><a href='/release/4.2.5'>4.2.5</a><li><a href='/release/4.2.5'>4.2.5</a><li><a href='/release/4.2.4'>4.2.4</a><li><a href='/release/4.2.3'>4.2.3</a><li><a href='/release/4.2.2'>4.2.2</a><li><a href='/release/4.2.1'>4.2.1</a><li><a href='/release/4.2.0'>4.2.0</a><li><a href='/release/4.1.3'>4.1.3</a><li><a href='/release/4.1.2'>4.1.2</a><li><a href='/release/4.1.1'>4.1.1</a><li><a href='/release/4.1.0'>4.1.0</a><li><a href='/release/4.0.5'>4.0.5</a><li><a href='/release/4.0.4'>4.0.4</a><li><a href='/release/4.0.3'>4.0.3</a><li><a href='/release/4.0.2'>4.0.2</a><li><a href='/release/4.0.1'>4.0.1</a><li><a href='/release/4.0.0'>4.0.0</a><li><a href='/release/3.5.1'>3.5.1</a><li><a href='/release/3.5.0'>3.5.0</a><li><a href='/release/3.4.1'>3.4.1</a><li><a href='/release/3.4.0'>3.4.0</a><li><a href='/release/3.3.2'>3.3.2</a><li><a href='/release/3.3.1'>3.3.1</a><li><a href='/release/3.3.0'>3.3.0</a><li><a href='/release/3.2.0'>3.2.0</a><li><a href='/release/3.1.2v2'>3.1.2v2</a><li><a href='/release/3.1.2'>3.1.2</a><li><a href='/release/3.1.1'>3.1.1</a><li>3.1.0beta<li><a href='/release/3.0.9b'>3.0.9b</a><li><a href='/release/3.0.9a'>3.0.9a</a><li><a href='/release/3.0.9'>3.0.9</a><li><a href='/release/3.0.8'>3.0.8</a><li><a href='/release/3.0.7s'>3.0.7s</a><li><a href='/release/3.0.6'>3.0.6</a><li><a href='/release/3.0.5'>3.0.5</a><li><a href='/release/3.0.4'>3.0.4</a><li><a href='/release/3.0.3'>3.0.3</a><li><a href='/release/3.0.2'>3.0.2</a><li><a href='/release/3.0.1'>3.0.1</a><li><a href='/release/3.0.0'>3.0.0</a><li><a href='/release/2.9.3'>2.9.3</a><li><a href='/release/2.9.2'>2.9.2</a><li><a href='/release/2.9.1'>2.9.1</a><li><a href='/release/2.9.0'>2.9.0</a><li><a href='/release/2.8.3'>2.8.3</a><li><a href='/release/2.8.2'>2.8.2</a><li><a href='/release/2.8.1'>2.8.1</a><li><a href='/release/2.8.0'>2.8.0</a><li><a href='/release/2.7.9v6'>2.7.9v6</a><li><a href='/release/2.7.9v5'>2.7.9v5</a><li><a href='/release/2.7.9v4'>2.7.9v4</a><li><a href='/release/2.7.9v3'>2.7.9v3</a><li><a href='/release/2.7.9v2'>2.7.9v2</a><li><a href='/release/2.7.9v1'>2.7.9v1</a><li><a href='/release/2.7.8'>2.7.8</a><li><a href='/release/2.7.7'>2.7.7</a><li><a href='/release/2.7.6'>2.7.6</a><li><a href='/release/2.7.5'>2.7.5</a><li><a href='/release/2.7.4'>2.7.4</a><li><a href='/release/2.7.3'>2.7.3</a><li><a href='/release/2.7.2'>2.7.2</a><li><a href='/release/2.7.1'>2.7.1</a><li><a href='/release/2.7.0'>2.7.0</a><li><a href='/release/2.6.2'>2.6.2</a><li><a href='/release/2.6.1'>2.6.1</a><li><a href='/release/2.6.0'>2.6.0</a><li><a href='/release/2.5.9'>2.5.9</a><li><a href='/release/2.5.8'>2.5.8</a><li><a href='/release/2.5.7'>2.5.7</a><li><a href='/release/2.5.6'>2.5.6</a><li><a href='/release/pcangband-1.4'>PCAngband 1.4</a><li><a href='/release/2.5.5'>2.5.5</a><li><a href='/release/2.5.4'>2.5.4</a><li><a href='/release/2.5.3'>2.5.3</a><li><a href='/release/2.5.2'>2.5.2</a><li><a href='/release/2.5.1'>2.5.1</a><li><a href='/release/2.5.0-beta'>2.5.0-beta</a><li><a href='/release/pcangband-1.3'>PCAngband 1.3</a><li><a href='/release/pcangband-1.2'>PCAngband 1.2</a><li><a href='/release/2.4.fk'>2.4.frog-knows</a></ul>
</div>

<div class='page'>
<h3>Downloads</h3>

<ul>
<li><a href="https://github.com/angband/angband/archive/refs/tags/v3.1.0beta.tar.gz" title="Source tarball, 2.8M">Source code</a></li>
<li><a href="https://github.com/angband/angband/releases/download/v3.1.0beta/angband-3.1.0beta-win.zip" title="Windows port, 1.5M zip file">Windows</a></li>
<li><a href="https://github.com/angband/angband/releases/download/v3.1.0beta/Angband-3.1.0beta-osx.dmg" title="Max OS X port, 2.0M .dmg file">Mac OS X</a>, universal binary</li>
</ul>

<h3>Background</h3>

<p>Angband 3.1.0 beta was released on the 7th January 2009 by Anna Sidwell, some ten months after the previous (bugfix) release, and so the release represented a big change over what had gone before.  The main features of the release from the user's point of view were the improved UI and the reduction in monster drops.</p>

<p>This release also had the longest list of credits for a single release in the history of the game to this point: Eytan Zweig, pelpel, Kenneth Boyd, J.D. White, Eddie Grove, Rowan Beentje, Nick McConnell, Gabriel Cunningham, Shanoah Alkire, Alexander Philips, mikon, Antony Sidwell, Joe Buck, Erik Osheim, d_m and Antoine were all noted as contibutors.</p>

<p>The changelog provided with the release is below, but it is by no means exhaustive.</p>

<h4>Noticeable up-front UI changes</h4>

<ul>
<li>Add EyAngband-style quickstart option.</li>
<li>Notes, like NPP and FA, except with brand new code by J.D. White.
(#10)</li>
<li>Add a trap detection indicator.  Also, colour the edges of trap-
detected areas green. (#19)</li>
<li>Make status bar display all timed effects, left-to-right, which
involves moving the dungeon level to the bottom of the left-hand
display. (#191)</li>
<li>Add show<em>lists option, which is the same as always</em>show_lists in
Ey. (#25)</li>
<li>Auto-wield birth items (#24)</li>
<li>Change the object information screen quite a bit: (#214, #26)
<ul>
<li>Show average damage for weapons and ammo (#26)</li>
<li>Make descriptions a fair bit terser (#399)</li>
<li>Show breakage chance for ammo</li>
<li>Track item origin, so every item has a tag telling you where it
came from (#149)</li>
</ul></li>
<li>Monster recall changes (part of #152)
<ul>
<li>some colouring removed, some added</li>
<li>Monster's depth is in red if it's beyond maximum depth, light
green otherwise.</li>
<li>more information is known about monsters before they are killed</li>
</ul></li>
<li>Add how many items the player already has when buying something at
the store.  (closes #151)</li>
<li>Allow use of the space bar to advance a screenful in all
menus.  (#244)</li>
<li>Make all menus wraparound at the top/bottom.  (#244)</li>
<li>Monster recall display now cycles through monsters in level order,
not in the order that the monster definition file is written
in.  (#302)</li>
<li>Add an indication of maximum capacity in the inventory
display.  (#358)</li>
<li>Menus should use 1234567890 as little as possible for "tags".  (#292)</li>
<li>Remove the "depth<em>in</em>feet" option, instead displaying both the
dungeon level and the depth everywhere.</li>
<li>Ensure that store-bought and birth-given torches have the same number
of turns for stacking purposes.</li>
<li>Death screen now uses scrollable menu. (#416)</li>
<li>Drop squelched items</li>
<li>Append {tried} to tried items in the object browser (r606)</li>
<li>Put {tried} items before untried items in the object browser</li>
<li>The monster list display has a little more colour-coding</li>
<li>Death menu now uses a scrolly menu.</li>
<li>Preserve mode has a sensible description again.</li>
<li>Try and differentiate the level feelings more.</li>
<li>Add the moderately well-tested "lazy movement" patch which allows a 
movement delay to be set, during which it is possible to choose a
second direction.  This means that up and left in quick succession
can be translated to an actual diagonal.  This may improve some
people's laptop playing experience without resorting to the
roguelike keyset.</li>
<li>Add bigscreen support to the self-knowledge screen.</li>
<li>Make inscriptions like "!k!k!k" prompt multiple times again.  (#492)</li>
<li>Make monster XP and native depth always known, even without
kills.  (#596)</li>
<li>Rejig social status a bit -- it rises with level from a certain baseline.</li>
<li>Display various skills numerically on the character sheet, rather than
with text.  This is like Eddie's patch, but a bit more polished.</li>
<li>Add a "display item list" command and term window.  (Thanks to Eric
Osheim)</li>
<li>Add method of death to the character dump.  (#501)</li>
<li>Tell the payer when timed effects increase or decrease as the result
of effects.  (idea by Eddie Grove)</li>
<li>Windows versions now use hashes and percent signs for walls until
there's time to sort out all existing fonts to be Vista-compatible.
(#232)</li>
<li>Squelch 'K'ind feature now available in the roguelike keyset. (#339)</li>
</ul>

<h4>Gameplay changes</h4>

<p>There are some pretty big gameplay changes.</p>

<p>The object list has been reworked quite a bit.  It is a bit more
varied and has less duplication.  Some items have been removed and
others added.  The new items have had relatively little testing and
may be gone again next release.</p>

<ul>
<li>The number of items that monsters drop has been reduced drastically.</li>
<li>Potions tend to appear in stacks now.</li>
<li>The range of food items has been reduced.</li>
<li>Healing heal a proportion of wounds, not just a set value-- this
makes all the potions useful.</li>
<li>Add a selection of "gain one, lose one" stat potions to replace the
old stat loss potions-- they guarantee a stat to raise and reduce one
randomly.</li>
<li>The Elven Rings have a variety of healings, at the suggestion of
Timo.  Also, apply some other changes from the TV-patch (r428)</li>
<li>Replace the sustain {stat} rings with sustain mind and sustain body,
providing three sustains each.</li>
<li>(#543) Make ammo of slay evil/venom apply to Mithril ammo too.</li>
</ul>

<p>Gold drops have also been reworked.  By the end of the game, there is
about 3.6x less gold per drop than in any earlier version or Angband
or Moria, but the amount per drop at the beginning of the dungeon 
is quite similar to pre-existing levels.</p>

<p>Magic mapping and detection use the same-sized rectangular area around
the player regardless of screen size.</p>

<p>Fear now carries a to-hit penalty to missile weapons of 20, as well as
giving an AC bonus of 8.  It also increases the failure chance of
spells, but spells that cure fear have been made harder to fail to 
balance this out.</p>

<p>Birth:</p>

<ul>
<li>Make point-based points worth less gold.</li>
<li>Minimum starting gold is 200AU.</li>
<li>Add an option to start the character with 500AU but no equipment.</li>
<li>Point-based character generation is now equivalent to best available
from the autoroller.  (Eddie Grove)</li>
<li>All characters start with WoR.</li>
</ul>

<p>Stores:</p>

<ul>
<li>Phase Door is now a staple item.</li>
<li>Start stocking deeper items as the character descends.</li>
<li>Rewrite the rules for shopkeepers
<ul>
<li>Remove individual-shopkeeper and race-based price changes from the
store code, to make it easier to balance pricing.</li>
<li>Adjust adj<em>chr</em>gold[] values upwards to represent the average-110%
inflation usually applied by the individual-shopkeeper greed
values.  This should really be applied to the object.txt file
instead, though.</li>
</ul></li>
</ul>

<p>ID:</p>

<ul>
<li>Make ID reveal all powers of an object, and remove <em>ID</em>.  (#158)</li>
<li>Make pseudo-id not occur whilst resting, but also make pseudo-ID
lengths shorter (by a little over half) to compensate.</li>
<li>Some items, when worn long enough, get automatically ID'd</li>
<li>Items pseudo-id'd as {average} are automatically ID'd, and thus will
stack properly</li>
<li>Make wands/staffs stack even when un-ID'd</li>
<li>Pseudo-ID obviously excellent items as {excellent} when possible
(e.g. brands/slays/obvious stat bonuses).</li>
<li>Remove "good" pseudo-ID, replace with "magical" -- for non-cursed
non-average non-ego non-artifacts</li>
<li>Add "strange" pseudo-ID, for when items have mixed blessings</li>
<li>Stop automatically cursing all bad weaponry</li>
<li>Make weak pseudo-id notice the difference between magical and
excellent</li>
<li>Allow any/all rings/amulets to be cursed if the game wants to
generate a "bad" item.  This is liable to be rethought in the future.</li>
</ul>

<p>A small selection of other changes:</p>

<ul>
<li>Remove autoscum.  (#365) -- really?</li>
<li>Add minimum depths for each kind of trap.  As such, only teleport and
confusion traps occur at dlev1.  This should help some people.</li>
<li>Make the rogue slightly better at combat than the ranger, based on Timo's sugges
tion.  (Message-ID: <a href="&#x6D;&#x61;&#x69;&#108;&#x74;&#111;:&#54;&#53;&#x31;&#x76;&#107;&#110;&#70;&#50;c&#118;&#x6A;&#108;&#50;U1&#64;&#x6D;&#105;&#x64;&#46;i&#110;&#x64;&#105;&#x76;&#105;&#x64;&#117;a&#108;.&#110;&#x65;&#116;">&#54;&#53;&#x31;&#x76;&#107;&#110;&#70;&#50;c&#118;&#x6A;&#108;&#50;U1&#64;&#x6D;&#105;&#x64;&#46;i&#110;&#x64;&#105;&#x76;&#105;&#x64;&#117;a&#108;.&#110;&#x65;&#116;</a>)</li>
<li>Lower the distance missile weapons can fire into the 10-14 grids range.</li>
<li>Make monster arrow attacks sometimes miss.  (#537)</li>
<li>Some improvements to monster AI.</li>
</ul>

<h4>Port</h4>

<ul>
<li>X11: Add -x commandline option for choosing the location of the
settings file (#333, patch by morth)</li>
<li>GTK2: Continue work; add term windows, graphics, etc. and also some
special dedicated display windows, like "messages" and "monster
list". (shanoah)</li>
<li>OS X: the OS X version is now a universal binary, and runs faster,
better, quicker, and with more sound than before.  (Rowan Beentje)</li>
</ul>

<h4>Code-level</h4>

<p>Monster HP is now specified as an average value around which to
randomise, instead of using a "12d5"-type calculation.  Uniques always
have the number of HPs specified in the monster.txt file, like before.
This is copied from Ey.</p>

<p>A lot of code-level cleanup has been applied to this release, much of it
still in flux.  Many new files have been split out of existing files,
which should now have much more self-explanitory names.  The player/, 
monster/ and object/ subdirectories have been created, to aid seperation
of code.</p>

<p>There is also a new generic effects handler so that all item activations
and use abilities share the same code; this replaces use-obj.c and a lot
of descriptions from lib/edit/object.txt. (#234)</p>

<p>Memory handling has been reviewed.  Now, all code should assume that
allocation will succeed, just like it did already.  There is also a
realloc()-style function along with its own hook.  string_make() has
been modified to no longer return a "const char *", and so all the code
now only uses "const" when it means "const".  Some macros have been
removed.</p>

<p>Elly rewrote the message and quark packages, previously in util.c,
and in the process split them out into their own z- files.  The z-msg
package is now much more understandable but marginally less "efficient",
and certainly less "optimised".</p>

<p>Option definitions have moved to option.h, and the names and
descriptions for options have moved to option.c.  Option data is now
stored in a much more visually compact way, much more suitable for
editing than the old system was. (#64)</p>

<p>Additionally, a new file API has been introduced which combines the
previous mishmash of fd<em>*() and my</em>f*() calls into a simpler, better
documented interface.  (#137)</p>

<p>Store stocking is specified in lib/edit/store.txt now, in a reasonably
flexible format.</p>

<p>A fair bit of work has gone into allowing item names to be used in the
edit files rather than the tval/sval numbers.  For example, see the
new store.txt file; but also the lib/pref/ graphics files, and the
starting items in the p_class.txt file, amongst others.  This is a
fairly easy thing to do and is a massive massive usability enhancement.
It means that invalid item references are caught much sooner, since if
an item is removed, all references to its name become invalid.</p>

<p>Set up an event system for UI display updates, where the game
communicates with the UI by sending messages saying that something's
changed that the UI might be interested in, rather than deciding that
specific things should be redraw.  The main screen updates all use this
system now.  Amongst other things, this system should help things like
the borg and graphical frontends, because they can hook right into
changes in state.  (#348)</p>

<p>object1.c and object2.c have been split out into a series of files,
obj-{desc,make,ui,util}.c.  This makes it much easier to remember what
is where.  Also, object_desc() has seen a rewrite, so hopefully it's a
lot more hackable now.</p>

<p>The beginnings of an organised code documentation scheme have started,
using doxygen.  Makefile.std provides an easy mechanism to generate docs
(try "make docs").</p>

<p>Other assorted changes:</p>

<ul>
<li>Remove a whole load of useless or unused configuration options from
config.h.</li>
<li>"make -f Makefile.inc depgen" will output "Makefile.new", which then
contains up-to-date dependencies for the project.</li>
<li>Add "flags" back to object_type, removing the need for the hacky
"xtra" bytes.  This paves the way for e.g. fireproofing scrolls
later. (#120)</li>
<li>Makefile for MSVC/NMAKE command-line build.  Currently works with
MSVC 6+; flags could use tweaking for MSVC 8+.</li>
<li>Clean up racial and class skill values into arrays.  (Kenneth Boyd)</li>
<li>Use header file guards in all header files, and use a consistent
naming scheme for them ("Elly")</li>
<li>Add a very basic test harness for "unit testing" of the game's code,
though this is barely used at present.  Thanks to Fennec for cleaning
this up a bit.</li>
<li>Introduce the one<em>in</em>() notation to the game, for percentile dice.</li>
<li>Move to using randint0() and randint1() for random numbers.</li>
<li>Add proper transparency to the PNG files.  (fixes #270; thanks to Rowan Beentje</li>
<li>Move to using flags[6] for monster flags rather than individual flagsets.</li>
<li>Score code moved to score.c and extensively refactored.</li>
</ul>

</div>

<script src="/js/releases.js"></script>

	</div>
</div>

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-10039059-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
